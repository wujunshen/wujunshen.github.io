<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/icon/cat.png"><link rel="icon" href="/img/icon/cat.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="咖啡猫"><meta name="keywords" content=""><meta name="description" content="消息队列-RabbitMQ"><meta property="og:type" content="article"><meta property="og:title" content="RabbitMQ"><meta property="og:url" content="https://www.wujunshen.cn/posts/3041119952.html"><meta property="og:site_name" content="咖啡猫"><meta property="og:description" content="消息队列-RabbitMQ"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.wujunshen.cn/img/jetbrain/1920x1080-dotpeek2022_1.png"><meta property="article:published_time" content="2022-05-12T22:22:50.000Z"><meta property="article:modified_time" content="2022-05-30T12:15:07.000Z"><meta property="article:author" content="咖啡猫"><meta property="article:tag" content="中间件"><meta property="article:tag" content="消息队列"><meta property="article:tag" content="RabbitMQ"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://www.wujunshen.cn/img/jetbrain/1920x1080-dotpeek2022_1.png"><title>RabbitMQ - 咖啡猫</title><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/hint.css@2/hint.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/prismjs@1/themes/prism-tomorrow.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/prismjs@1/plugins/line-numbers/prism-line-numbers.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script id="fluid-configs">var Fluid=window.Fluid||{},CONFIG={hostname:"www.wujunshen.cn",root:"/",version:"1.8.14",typing:{enable:!1,typeSpeed:70,cursorChar:"_",loop:!1},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},copy_btn:!0,image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,baidu:"29d28856048f5cb020dac5f5c6add7a9",google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:"https://aotnutqx.lc-cn-n1-shared.com",path:"window.location.pathname",ignore_local:!0,appId:"AotNUTqXh4KxbyAqtWFR9PH6-gzGzoHsz",appKey:"cqckpd2YjhM5GWX2Ew4tKNyY",counter:{enable:!0},visitor:{enable:!0},like:{enable:!0}}},search_path:"/local-search.xml"}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><script src="/js/statistics.js"></script><meta name="generator" content="Hexo 5.4.2"></head><body><div id="web_bg"></div><header style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>咖啡猫</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> 首页</a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> 归档</a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> 分类</a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> 标签</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-books"></i> 图书馆</a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/ElasticSearch/">ElasticSearch </a><a class="dropdown-item" href="/Kafka/">Kafka </a><a class="dropdown-item" href="/RabbitMQ/">RabbitMQ </a><a class="dropdown-item" href="/Zookeeper/">Zookeeper </a><a class="dropdown-item" href="/Redis/">Redis </a><a class="dropdown-item" href="/mysql/">Mysql </a><a class="dropdown-item" href="/Dubbo/">Dubbo </a><a class="dropdown-item" href="/%E5%8D%8F%E8%AE%AE/">协议 </a><a class="dropdown-item" href="/Socket/">Socket </a><a class="dropdown-item" href="/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/">函数式编程 </a><a class="dropdown-item" href="/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式 </a><a class="dropdown-item" href="/Istio/">Istio </a><a class="dropdown-item" href="/algorithm/">算法</a></div></li><li class="nav-item"><a class="nav-link" href="/links/"><i class="iconfont icon-link-fill"></i> 友链</a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> 关于</a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div class="banner" id="banner" parallax="true" style="background:url(/img/page/post.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="page-header text-center fade-in-up"><span class="h2" id="subtitle" title="RabbitMQ">RabbitMQ</span><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> 咖啡猫 </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2022-05-13 06:22" pubdate>星期五, 五月 13日 2022, 6:22 早上</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 3.2k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 27 分钟 </span><span id="busuanzi_container_page_pv" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="busuanzi_value_page_pv"></span> 次</span></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div class="py-5" id="board"><article class="post-content mx-auto"><h1 style="display:none">RabbitMQ</h1><p class="note note-info">本文最后更新于：星期一, 五月 30日 2022, 8:15 晚上</p><div class="markdown-body"><p>消息队列使用目的:</p><p><strong>异步</strong>、<strong>削峰</strong>、<strong>解耦</strong></p><h1 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h1><p>RabbitMQ基于AMQP协议，通过使用通用协议就可以做到在不同语言之间传递。</p><h2 id="核心概念"><a href="#核心概念" class="headerlink" title="核心概念"></a>核心概念</h2><ol><li>server<br>又称broker，接受客户端连接，实现AMQP实体服务。</li><li>connection<br>连接和具体broker网络连接。</li><li>channel<br>网络信道，几乎所有操作都在channel中进行，channel是消息读写的通道。客户端可以建立多个channel，每个channel表示一个会话任务。</li><li>message<br>消息，服务器和应用程序之间传递的数据，由properties和body组成。properties可以对消息进行修饰，比如消息的优先级，延迟等高级特性;body是消息实体内容。</li><li>virtual host<br>虚拟主机，用于逻辑隔离，最上层消息的路由。一个virtual host可以若干个exchange和queue，同一个virtual host不能有同名的exchange或queue。</li><li>exchange<br>交换机，接受消息，根据路由键转发消息到绑定的队列上。</li><li>banding<br>exchange和queue之间的虚拟连接，binding中可以包括routing key</li><li>routing key<br>一个路由规则，虚拟机根据他来确定如何路由一条消息。</li><li>queue<br>消息队列，用来存放消息的队列。</li></ol><h2 id="Exchange"><a href="#Exchange" class="headerlink" title="Exchange"></a>Exchange</h2><p>类型有 direct、topic、fanout、headers、durability（是否需要持久化，true为需要）、auto delete</p><p>最后一个绑定Exchange上的队列被删除Exchange也删除。</p><p>主要介绍下列三个:</p><ol><li>direct<br>所有发送到Direct Exchange的消息被转发到RouteKey中指定的Queue,Direct Exchange可以使用默认的默认的Exchange （default<br>Exchange），默认的Exchange会绑定所有的队列，所以Direct可以直接使用Queue名（作为routing key ）绑定。或者消费者和生产者的routing key完全匹配。</li><li>topic<br>是指发送到Topic Exchange的消息被转发到所有关心的Routing key中指定topic的Queue上。Exchange 将routing<br>key和某Topic进行模糊匹配，此时队列需要绑定一个topic。所谓模糊匹配就是可以使用通配符，”#”可以匹配一个或多个词，”* “只匹配一个词。<br>比如”log.#”可以匹配”log.info.test”<br>“log.*” 就只能匹配log.error。</li><li>fanout<br>不处理路由键，只需简单的将队列绑定到交换机上。发送到这个 Exchange 上的消息都会被发送到与它绑定的队列上。Fanout转发是最快的。</li></ol><h1 id="如何实现高可用？"><a href="#如何实现高可用？" class="headerlink" title="如何实现高可用？"></a>如何实现高可用？</h1><p><strong>开启镜像模式</strong></p><p>创建的queue，无论元数据还是queue里的消息都会存在于多个实例上。</p><p>就是说，每个RabbitMQ节点都有这个queue的一个完整镜像，包含queue的全部数据。</p><p>每次写消息到queue，都会自动把消息同步到多个实例的queue上</p><p><img src="/img/rabbitmq/A591C744680EDD96A069B3D1F5A6E5B9.jpg" srcset="/img/loading.gif" lazyload alt="镜像模式"></p><p><strong>如何开启？</strong></p><p>后台新增镜像集群模式的策略，指定时要求数据同步到所有节点，也可要求同步到指定数量的节点。</p><p>再次创建 queue 的时候，应用这个策略，就会自动将数据同步到其他的节点上去</p><p><strong>优点</strong>:<br>任何一个节点挂了，其它节点还包含 queue 的完整数据， consumer 可以到其它节点上去消费数据。</p><p><strong>缺点</strong>:<br>第一，性能开销大，消息需要同步到所有节点上，导致网络带宽压力和消耗很重<br>第二，不是分布式，没有扩展性可言。如果某个 queue 负载很重，加机器，新增的机器也包含了这个 queue 的所有数据，并没有办法线性扩展 queue。如果queue 的数据量很大，大到节点容量无法容纳，就不行了</p><h1 id="如何实现消息消费幂等，即不被重复消费？"><a href="#如何实现消息消费幂等，即不被重复消费？" class="headerlink" title="如何实现消息消费幂等，即不被重复消费？"></a>如何实现消息消费幂等，即不被重复消费？</h1><p>见<a href="/posts/2591906323.html#%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%B6%88%E6%81%AF%E6%B6%88%E8%B4%B9%E5%B9%82%E7%AD%89%EF%BC%8C%E5%8D%B3%E4%B8%8D%E8%A2%AB%E9%87%8D%E5%A4%8D%E6%B6%88%E8%B4%B9%EF%BC%9F">Kafka</a>内容</p><h1 id="如果保证不丢消息？"><a href="#如果保证不丢消息？" class="headerlink" title="如果保证不丢消息？"></a>如果保证不丢消息？</h1><p><img src="/img/rabbitmq/7FABA29BB5EFAE6906C4D54E6961103C.jpg" srcset="/img/loading.gif" lazyload alt="丢消息情形"></p><p>丢数据分三种情况</p><h2 id="生产者"><a href="#生产者" class="headerlink" title="生产者"></a>生产者</h2><p>数据发送到 RabbitMQ 时，因为网络问题，可能数据丢了。</p><p>选择 RabbitMQ 提供的事务功能，在生产者发送数据之前开启 RabbitMQ 事务 channel.txSelect，然后发送消息，如果消息没有成功被 RabbitMQ<br>接收到，那么生产者会收到异常报错，此时就可以回滚事务channel.txRollback，然后重试发送消息；如果收到了消息，那么可以提交事务channel.txCommit</p><div class="code-wrapper"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// 开启事务</span>
channel<span class="token punctuation">.</span>txSelect
<span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 这里发送消息</span>
<span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    channel<span class="token punctuation">.</span>txRollback
    <span class="token comment">// 这里再次重发这条消息</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// 提交事务</span>
channel<span class="token punctuation">.</span>txCommit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>RabbitMQ 事务机制（同步）会让吞吐量下降，因此会很耗性能。</p><p>如果要确保写 RabbitMQ 消息不丢消息，可以开启 confirm 模式，在生产者设置开启 confirm 模式，每次写消息分配一个唯一的 id，然后写入RabbitMQ 中，RabbitMQ 会回传一个 ack 消息，说这个消息 ok<br>了。如果 RabbitMQ 没能处理这个消息，会回调一个 nack 接口，告诉消息接收失败，只能再次重试。但可结合这个机制在内存里维护每个消息 id 的状态，如果超过一定时间还没接收到这个消息的回调，那可以重发。</p><p>事务机制和 confirm 机制最大的不同在于:<br>事务机制是同步，提交一个事务之后会阻塞,但 confirm 机制是异步，发个消息后可以发送下一个消息，然后下一个消息 RabbitMQ 接收了之后会异步回调一个接口通知这个消息已接收到。</p><p>因此在生产者这块为了避免数据丢失，都是用 confirm 机制。</p><h2 id="RabbitMQ服务"><a href="#RabbitMQ服务" class="headerlink" title="RabbitMQ服务"></a>RabbitMQ服务</h2><p>必须开启 RabbitMQ 持久化，就是消息写入之后持久化到磁盘，即使RabbitMQ 挂了，恢复之后会自动读取之前存储的数据，一般情况下数据就不会丢。<br>除非 RabbitMQ 自身还没持久化就挂了，可能会导致少量数据丢失，但发生概率较小。</p><p>设置持久化有两个步骤:</p><ul><li><p>创建 queue 时,设置持久化<br>保证 RabbitMQ 持久化 queue 的元数据，但是不会持久化 queue 里的数据。</p></li><li><p>发送消息时,把消息的 deliveryMode 设置为 2<br>即把消息设置为持久化，此时 RabbitMQ 会将消息持久化到磁盘上去。</p></li></ul><p>必须要同时设置这两个持久化，RabbitMQ 就算挂了再重启，也会从磁盘上重启恢复 queue，恢复这个 queue 的数据。</p><p>但是还有一种可能，就是某个消息写到了 RabbitMQ 中，但还没来得及持久化到磁盘上。此时 RabbitMQ 挂了，就会导致内存里的一点点数据丢失。</p><p>所以，持久化可以和生产者的 confirm 机制配合起来，只有消息被持久化到磁盘之后，才会通知生产者 ack ，哪怕持久化到磁盘之前，RabbitMQ 挂了，数据丢了，生产者收不到 ack，还是可以重发。</p><h2 id="消费者"><a href="#消费者" class="headerlink" title="消费者"></a>消费者</h2><p>使用 RabbitMQ 提供的 ack 机制，简而言之，必须关闭 RabbitMQ 的自动 ack，通过一个 api 来调用就可以了，之后每次，确保代码处理完消息时，再在程序里 ack 一次。通过这样的处理方式，如果还没处理完消息，没有<br>ack 时， RabbitMQ 会认为代码还没处理完，就会把这个消息消费动作分配给别的消费者处理，这样消息是不会丢的。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p><img src="/img/rabbitmq/6141BD7C1D6731BC639E9054816B69B8.jpg" srcset="/img/loading.gif" lazyload alt="丢消息解决方案脑图"></p><h1 id="如何保证消息被消费的顺序？"><a href="#如何保证消息被消费的顺序？" class="headerlink" title="如何保证消息被消费的顺序？"></a>如何保证消息被消费的顺序？</h1><h2 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h2><p><img src="/img/rabbitmq/9418C9D261BC18C401FDF0837D241627.jpg" srcset="/img/loading.gif" lazyload alt="按顺序消费情形"></p><p>如上图，生产者向 RabbitMQ 里发送三条数据，要求的消费顺序依次是data1&#x2F;data2&#x2F;data3。<br>有三个消费者分别从 MQ 中消费这三条数据中的一条，结果消费者2先执行完操作，把 data2 存入数据库，然后是 data1&#x2F;data3。这就没有达到要求的消费顺序。</p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>拆分成多个 queue，每个 queue 负责一个 consumer；或就一个 queue 对应一个 consumer，然后这个 consumer 内部用内存队列做排队，比如设定消息消费的优先级</p><p><img src="/img/rabbitmq/6BCA2B939EEE4DD7944D5447B3A116EA.jpg" srcset="/img/loading.gif" lazyload alt="解决方案"></p><h1 id="推荐书单"><a href="#推荐书单" class="headerlink" title="推荐书单"></a><a href="/RabbitMQ">推荐书单</a></h1></div><hr><div><div class="post-metas mb-3"><div class="post-meta mr-3"><i class="iconfont icon-category"></i> <a class="hover-with-bg" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/">中间件</a></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a class="hover-with-bg" href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/">中间件</a> <a class="hover-with-bg" href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/">消息队列</a> <a class="hover-with-bg" href="/tags/RabbitMQ/">RabbitMQ</a></div></div><p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p><div class="post-prevnext"><article class="post-prev col-6"><a href="/posts/38366605.html"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">Socket</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/posts/3973228452.html"><span class="hidden-mobile">基本数据结构</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article class="comments" id="comments" lazyload><div id="valine"></div><script type="text/javascript">Fluid.utils.loadComments("#valine",(function(){Fluid.utils.createScript("https://fastly.jsdelivr.net/npm/valine@1/dist/Valine.min.js",(function(){var i=Object.assign({appId:"AotNUTqXh4KxbyAqtWFR9PH6-gzGzoHsz",appKey:"cqckpd2YjhM5GWX2Ew4tKNyY",path:"window.location.pathname",placeholder:"说点什么吧...",avatar:"retro",meta:["nick","mail","link"],requiredFields:[],pageSize:10,lang:"zh-CN",highlight:!1,recordIP:!0,serverURLs:"",emojiCDN:null,emojiMaps:null,enableQQ:!1},{el:"#valine",path:window.location.pathname});new Valine(i),Fluid.utils.waitElementVisible("#valine .vcontent",()=>{Fluid.plugins.initFancyBox("#valine .vcontent img:not(.vemoji)")})}))}))</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p><div class="toc-body" id="toc-body"></div></div></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer class="text-center mt-5 py-3"><div class="footer-content"><div style="font-size:.85rem"><span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span><script src="/js/duration.js"></script></div></div><div class="statistics"><span id="busuanzi_container_site_pv" style="display:none">总访问量 <span id="busuanzi_value_site_pv"></span> 次 </span><span id="busuanzi_container_site_uv" style="display:none">总访客数 <span id="busuanzi_value_site_uv"></span> 人</span></div><div class="beian"><span><a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">沪ICP备2022013557号-1</a></span></div></footer><script src="https://fastly.jsdelivr.net/npm/nprogress@0/nprogress.min.js"></script><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/nprogress@0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://fastly.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="https://fastly.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/local-search.js"></script><script src="/js/img-lazyload.js"></script><script src="https://fastly.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js"></script><script src="https://fastly.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="https://fastly.jsdelivr.net/npm/anchor-js@4/anchor.min.js"></script><script defer src="https://fastly.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script><script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script defer>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?29d28856048f5cb020dac5f5c6add7a9";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script src="https://fastly.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://fastly.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><script src="/js/boot.js"></script><script src="/js/backgroundize.js"></script><link defer rel="stylesheet" href="/css/backgroundize.css"><script src="/js/timevalid.js"></script><script src="/js/reward.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":120,"height":300},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script></body></html>